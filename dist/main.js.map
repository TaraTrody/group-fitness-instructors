{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/config/config.js","webpack:///../src/server/app.js","webpack:///../src/server/controllers/auth.controllers.js","webpack:///../src/server/controllers/user.controllers.js","webpack:///../src/server/db/models/user.model.js","webpack:///../src/server/routes/auth.routes.js","webpack:///../src/server/routes/user.routes.js","webpack:///../src/server/utils/dbErrorHandler.js","webpack:///../template.js","webpack:///external \"bcrypt\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"express-jwt\"","webpack:///external \"helmet\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"lodash\"","webpack:///external \"mongoose\""],"names":["config","env","process","port","PORT","jwtSecret","JWT_SECRET","mongoUri","MONGODB_URI","MONGO_HOST","IP","MONGO_PORT","app","express","mongoose","connect","connection","on","Error","use","bodyParser","json","urlencoded","extended","cookieParser","compress","helmet","cors","userRoutes","authRoutes","get","req","res","status","send","Template","err","next","name","error","message","listen","console","log","info","signin","User","findOne","body","email","user","authenticate","password","token","jwt","sign","_id","cookie","expire","Date","lastName","signout","clearCookie","requireSignin","expressJwt","secret","requestProperty","hasAuthorization","authorized","profile","auth","create","newUser","save","result","errorHandler","getErrorMessage","list","find","select","userByID","ID","findById","exec","read","update","_","extend","updated","now","hashed_password","undefined","remove","deleteOne","deletedUser","UserSchema","Schema","firstName","type","String","trim","min","max","required","unique","match","userType","enum","created","default","pre","isModified","bcrypt","hash","methods","plaintextPassword","compare","path","validate","v","invalidate","isNew","model","router","Router","post","authCtrl","route","userCtrl","put","delete","param","code","getUniqueErrorMessage","errName","errors","output","fieldName","substring","lastIndexOf","charAt","toUpperCase","slice","ex"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const config = {\n  env: process.env.NODE_ENV || 'development',\n  port: process.env.PORT || 3030,\n  jwtSecret: process.env.JWT_SECRET || 'mongodb+srv://STrody:<1Fb9CQpFiQ7pM9JB>@cluster0-nybw4.mongodb.net/test',\n  mongoUri: process.env.MONGODB_URI\n    || process.env.MONGO_HOST\n    || `mongodb://${process.env.IP || 'localhost'}:${\n    process.env.MONGO_PORT || '27017'\n    }/mernproject`,\n};\n\nexport default config;\n","import express from 'express';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport compress from 'compression';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport mongoose from 'mongoose';\n\n\nimport config from '../config/config';\nimport Template from '../../template';\nimport userRoutes from './routes/user.routes'\nimport authRoutes from './routes/auth.routes'\n\n\nconst app = express();\n\n\nmongoose.connect(config.mongoUri);\nmongoose.connection.on('error', () => {\n  throw new Error(`unable to connect to database: ${config.mongoUri}`);\n});\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(cookieParser());\napp.use(compress());\napp.use(helmet());\napp.use(cors());\n\napp.use('/api/v1', userRoutes)\napp.use('/api/v1', authRoutes)\n\n\n\napp.get('/', (req, res) => {\n\n  res.status(200).send(Template());\n\n});\n\n// eslint-disable-next-line no-unused-vars\napp.use((err, req, res, next) => {\n  if (err.name === 'UnauthorizedError') {\n    res.status(401).json({ error: `${err.name}: ${err.message}` });\n  }\n});\n\n/* eslint-disable no-console */\napp.listen(config.port, (err) => {\n  if (err) {\n    console.log(err);\n  }\n  console.info('Server started on port %s.', config.port);\n});\n","import jwt from 'jsonwebtoken'\nimport expressJwt from 'express-jwt'\nimport User from '../db/models/user.model'\nimport config from '../../config/config'\n\nconst signin = (req, res) => {\n  User.findOne(\n    {\n      'email': req.body.email\n    }, (err, user) => {\n      if (err || !user) {\n        return res.status(401).json({\n          message: 'User not found'\n        })\n      }\n      if (!user.authenticate(req.body.password)) {\n        return res.status(401).json({\n          message: \"Email and password don't match\"\n        })\n      }\n      const token = jwt.sign({ _id: user._id }, config.jwtSecret)\n      res.cookie(\"t\", token, {\n        expire: new Date() + 9999\n      })\n      return res.json({\n        token,\n        user: { _id: user._id, lastName: user.lastName, email: user.email }\n      })\n    })\n}\nconst signout = (req, res) => {\n  res.clearCookie('t')\n  return res.status(200).json({\n    message: 'Successfully signed out'\n  })\n}\nconst requireSignin = expressJwt({\n  secret: config.jwtSecret,\n  requestProperty: 'auth' \n})\nconst hasAuthorization = (req, res, next) => {\n  const authorized = req.profile && req.auth && req.profile._id == req.auth._id \n  if(!(authorized)) { //why use this syntax\n    return res.status(403).json({\n      error: 'User is not authorized'\n    })\n  }\n  next()\n}\n\nexport default { signin, signout, requireSignin, hasAuthorization }","import _ from 'lodash'\nimport User from '../db/models/user.model'\nimport errorHandler from '../utils/dbErrorHandler'\n\nconst create = (req, res, next) => {\n\n  const newUser = new User(req.body)\n\n  newUser.save((err, result) => {\n    if (err) {\n      return res.status(400).json({\n        error: errorHandler.getErrorMessage(err)\n      })\n    }\n    res.status(200).json({\n      message: 'Successfully signed up!',\n\n    })\n  }\n  )\n}\n\nconst list = (req, res) => {\n  User.find((err, user) => {\n    if (err) {\n      return res.status(400).json({\n        error: errorHandler.getErrorMessage(err)\n      })\n    }\n    res.json(user)\n  }).select('-hashed_password')\n}\n\nconst userByID = (req, res, next, ID) => {\n  User.findById().exec((err, user) => {\n    if (err || !user) {\n      return res.status(400).json({\n        error: 'User not found'\n      })\n    }\n    req.profile = user\n    next()\n  })\n}\n\nconst read = (req, res) => {\n  return res.json(req.profile)\n}\n\nconst update = (req, res, next) => {\n  let user = req.profile\n  user = _.extend(user, req.body)\n  user.updated = Date.now()\n  user.save((err) => {\n    if (err) {\n      return res.status(400).json({\n        error: errorHandler.getErrorMessage(err)\n      })\n    }\n    user.hashed_password = undefined\n    res.json({\n      message: 'User account updated',\n      user\n    })\n  })\n}\n\nconst remove = (req, res, next) => {\n  let user = req.profile\n  user.deleteOne((err, deletedUser) => {\n    if (err) {\n      return res.status(400).json({\n        error: errorHandler.getErrorMessage(err)\n      })\n    }\n    user.hashed_password = undefined\n    res.json({\n      message: 'User account deleted',\n      deletedUser\n    })\n  }\n  )\n}\n\nexport default { create, list, userByID, read, update, remove }","import mongoose from 'mongoose';\nimport bcrypt from 'bcrypt';\n\nconst UserSchema = new mongoose.Schema({\n  firstName: {\n    type: String,\n    trim: true,\n    min: [2, 'Name should be between 2 and 30 characters'],\n    max: [30, 'Name should be between 3 and 30 characters'],\n    required: 'First name is required',\n  },\n  lastName: {\n    type: String,\n    trim: true,\n\n    min: [2, 'Name should be between 2 and 30 characters'],\n    max: [30, 'Name should be between 3 and 30 characters'],\n    required: 'Last name is required',\n  },\n\n  email: {\n    type: String,\n    unique: true,\n    required: 'Email is required',\n    // eslint-disable-next-line no-useless-escape\n    match: [/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/],\n  },\n  password: {\n    type: String,\n    required: 'Password is required',\n    min: [8, 'Password must have at least 8 characters'],\n    max: 160,\n  },\n\n  userType: {\n    type: String,\n    enum: ['Instructor', 'Studio/Gym'],\n    required: 'Please select',\n  },\n\n  created: {\n    type: Date,\n    default: Date.now,\n  },\n\n  updated: {\n    type: Date,\n  },\n});\n\n// eslint-disable-next-line consistent-return\n\nUserSchema.pre(\"save\", function (next) {\n  if (!this.isModified('password')) {\n    return next();\n  }\n\n  try {\n    bcrypt.hash(this.password, 10, function (err, hash) {\n      if (err) return next(err)\n      this.password = hash\n      next()\n\n    })\n\n  } catch (err) {\n    next(err);\n  }\n});\n\nUserSchema.methods = {\n\n\n  authenticate(plaintextPassword) {\n    try {\n      return bcrypt.compare(plaintextPassword, this.hashed_password);\n    } catch (err) {\n      throw err;\n    }\n  },\n};\n\nUserSchema.path('password').validate(function (v) {\n  if (this.password && this.password < 8) {\n    this.invalidate('password', 'Password must be at least 8 characters')\n  }\n  if (this.isNew && !this.password) {\n    this.invalidate('password', 'Password is required.')\n  }\n}, null);\n\nexport default mongoose.model('User', UserSchema);\n","import express from 'express'\nimport authCtrl from '../controllers/auth.controllers'\n\nconst router = express.Router()\n\n\nrouter.post('/auth/signin', authCtrl.signin)\n\nrouter.get('auth/signout', authCtrl.signout)\n\n\nexport default router","import express from 'express'\nimport userCtrl from '../controllers/user.controllers'\nimport authCtrl from '../controllers/auth.controllers'\n\nconst router = express.Router()\n\nrouter\n  .route('/users')\n  .get(userCtrl.list)\n  .post(userCtrl.create)\n\n\nrouter.route('/users/:userId')\n  .get(authCtrl.requireSignin, userCtrl.read)\n  .put(authCtrl.requireSignin, authCtrl.hasAuthorization, userCtrl.update)\n  .delete(authCtrl.requireSignin, authCtrl.hasAuthorization, userCtrl.remove)\n\nrouter.param('userId', userCtrl.userByID)\n\nexport default router;","const getErrorMessage = (err) => {\n  let message = ''\n  if (err.code) {\n    switch (err.code) {\n      case 11000:\n      case 11001:\n        message = getUniqueErrorMessage(err)\n        break;\n      default:\n        message = 'Something went wrong'\n    }\n  } else {\n    for (let errName in err.errors) {\n      if (err.errors[errName].message)\n        message = err.errors[errName].message\n    }\n  }\n  return message\n}\n\nconst getUniqueErrorMessage = (err) => {\n  let output\n  try {\n    let fieldName =\n      err.message.substring(err.message.lastIndexOf('.$') + 2,\n        err.message.lastIndexOf('_1'))\n    output = fieldName.charAt(0).toUpperCase() + fieldName.slice(1) + ' already exists'\n\n  } catch (ex) {\n    output = 'Unique field already exists'\n  }\n  return output\n}\n\nexport default { getErrorMessage }","export default () => `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\"/>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"/>\n  <title>Document</title>\n</head>\n<body>\n  <p>Hello Big Shantara World</p>\n</body>\n</html>`;\n","module.exports = require(\"bcrypt\");","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"express-jwt\");","module.exports = require(\"helmet\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"lodash\");","module.exports = require(\"mongoose\");"],"sourceRoot":""}